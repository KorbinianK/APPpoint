<dom-module id="login-element">


<style type="text/css">


    paper-material {

     width: 70%;
    margin: 0 auto;
        padding: 0 0 20px;

    }
	paper-input-container {
     padding: 0 20px 0 20px !important;
    }

    paper-button{
    width:30%;
    display: block;
        margin-top: 30px;
    margin-left: auto;
    margin-right: auto;

    }

    #center{

    }
</style>
<template>


<div id="login" hidden?="{{loggedIn}}">
<paper-material >
    <paper-header-panel class="">
         <paper-toolbar>
              <div><h2>Bitte einloggen</h2></div>
        </paper-toolbar>
    </paper-header-panel>
    <paper-input-container>
      <label>Benutzername</label>
      <input is="iron-input" name="name" type="username" required>
    </paper-input-container>
    <paper-input-container>
      <label>Password</label>
      <input is="iron-input" name="password" name="name" type="password" required>
    </paper-input-container>



   <div id="center"><paper-button class="submitButton" raised on-click="handleClick" >Anmelden</paper-button></div>
</paper-material>


</template>

</dom-module>

<script>
  (function() {
    var currentUser = Parse.User.current();
        if (currentUser) {
            (function(){
            
              })();
          } else {

            }

	Polymer({
		is: "login-element",

		properties: {
        loggedIn: false,
        username: {
          type: String
        },
        password:{
          type: String
        }},

        handleClick: function() {

      console.log('click',this);
      var
      username = $('[name="name"]').val(),
      password = $('[name="password"]').val();

    // Call Parse Login function with those variables
    Parse.User.logIn(username, password, {
        // If the username and password matches
        success: function(user) {

            var currentUser = Parse.User.current();


            if (currentUser) {
                (function(){

                  var inputs, index;

                  inputs = document.getElementsByTagName('input');
                  for (index = 0; index < inputs.length; ++index) {
                      inputs[index].val = '';
                  }

                  console.log(currentUser.get("isTeacher"));
                  location.reload();

              })();
          } else {

            }
            },
        // If there is an error
        error: function(user, error) {
            console.log(error);
            alert('Error!');
        }
    });

         }
       });
	})();

</script>
